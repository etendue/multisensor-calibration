<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="600" height="500" xmlns="http://www.w3.org/2000/svg">
  <!-- Title -->
  <text x="120" y="40" font-family="Arial" font-size="18" font-weight="bold">Factor Graph Optimization for Multisensor Calibration</text>
  
  <!-- Vehicle Poses -->
  <circle cx="100" cy="150" r="20" fill="#bbf" stroke="black" stroke-width="2"/>
  <text x="95" y="155" font-family="Arial" font-size="14" font-weight="bold">P₁</text>
  <text x="80" y="180" font-family="Arial" font-size="12">Pose 1</text>
  
  <circle cx="200" cy="150" r="20" fill="#bbf" stroke="black" stroke-width="2"/>
  <text x="195" y="155" font-family="Arial" font-size="14" font-weight="bold">P₂</text>
  <text x="180" y="180" font-family="Arial" font-size="12">Pose 2</text>
  
  <circle cx="300" cy="150" r="20" fill="#bbf" stroke="black" stroke-width="2"/>
  <text x="295" y="155" font-family="Arial" font-size="14" font-weight="bold">P₃</text>
  <text x="280" y="180" font-family="Arial" font-size="12">Pose 3</text>
  
  <circle cx="400" cy="150" r="20" fill="#bbf" stroke="black" stroke-width="2"/>
  <text x="395" y="155" font-family="Arial" font-size="14" font-weight="bold">P₄</text>
  <text x="380" y="180" font-family="Arial" font-size="12">Pose 4</text>
  
  <!-- Landmarks -->
  <circle cx="150" cy="250" r="15" fill="#fbb" stroke="black" stroke-width="2"/>
  <text x="145" y="255" font-family="Arial" font-size="14" font-weight="bold">L₁</text>
  
  <circle cx="250" cy="250" r="15" fill="#fbb" stroke="black" stroke-width="2"/>
  <text x="245" y="255" font-family="Arial" font-size="14" font-weight="bold">L₂</text>
  
  <circle cx="350" cy="250" r="15" fill="#fbb" stroke="black" stroke-width="2"/>
  <text x="345" y="255" font-family="Arial" font-size="14" font-weight="bold">L₃</text>
  
  <!-- Camera Parameters -->
  <rect x="150" cy="80" width="30" height="30" fill="#fbf" stroke="black" stroke-width="2"/>
  <text x="155" y="100" font-family="Arial" font-size="14" font-weight="bold">K</text>
  <text x="130" y="65" font-family="Arial" font-size="12">Camera Intrinsics</text>
  
  <rect x="250" cy="80" width="30" height="30" fill="#fbf" stroke="black" stroke-width="2"/>
  <text x="255" y="100" font-family="Arial" font-size="14" font-weight="bold">E</text>
  <text x="230" y="65" font-family="Arial" font-size="12">Camera Extrinsics</text>
  
  <rect x="350" cy="80" width="30" height="30" fill="#fbf" stroke="black" stroke-width="2"/>
  <text x="355" y="100" font-family="Arial" font-size="14" font-weight="bold">B</text>
  <text x="340" y="65" font-family="Arial" font-size="12">IMU Bias</text>
  
  <!-- Factors -->
  <!-- Prior factors -->
  <polygon points="100,120 90,110 110,110" fill="#bfb" stroke="black" stroke-width="2"/>
  <text x="70" y="105" font-family="Arial" font-size="12">Prior</text>
  
  <polygon points="150,50 140,40 160,40" fill="#bfb" stroke="black" stroke-width="2"/>
  <text x="120" y="35" font-family="Arial" font-size="12">Prior</text>
  
  <polygon points="250,50 240,40 260,40" fill="#bfb" stroke="black" stroke-width="2"/>
  <text x="220" y="35" font-family="Arial" font-size="12">Prior</text>
  
  <polygon points="350,50 340,40 360,40" fill="#bfb" stroke="black" stroke-width="2"/>
  <text x="320" y="35" font-family="Arial" font-size="12">Prior</text>
  
  <!-- IMU factors -->
  <rect x="150" y="150" width="20" height="20" fill="orange" stroke="black" stroke-width="2"/>
  <text x="155" y="165" font-family="Arial" font-size="14" font-weight="bold">I</text>
  
  <rect x="250" y="150" width="20" height="20" fill="orange" stroke="black" stroke-width="2"/>
  <text x="255" y="165" font-family="Arial" font-size="14" font-weight="bold">I</text>
  
  <rect x="350" y="150" width="20" height="20" fill="orange" stroke="black" stroke-width="2"/>
  <text x="355" y="165" font-family="Arial" font-size="14" font-weight="bold">I</text>
  
  <!-- Wheel odometry factors -->
  <rect x="150" y="120" width="20" height="20" fill="yellow" stroke="black" stroke-width="2"/>
  <text x="155" y="135" font-family="Arial" font-size="14" font-weight="bold">W</text>
  
  <rect x="250" y="120" width="20" height="20" fill="yellow" stroke="black" stroke-width="2"/>
  <text x="255" y="135" font-family="Arial" font-size="14" font-weight="bold">W</text>
  
  <rect x="350" y="120" width="20" height="20" fill="yellow" stroke="black" stroke-width="2"/>
  <text x="355" y="135" font-family="Arial" font-size="14" font-weight="bold">W</text>
  
  <!-- Reprojection factors -->
  <polygon points="125,200 115,190 135,190" fill="cyan" stroke="black" stroke-width="2"/>
  <text x="125" y="205" font-family="Arial" font-size="14" font-weight="bold">R</text>
  
  <polygon points="175,200 165,190 185,190" fill="cyan" stroke="black" stroke-width="2"/>
  <text x="175" y="205" font-family="Arial" font-size="14" font-weight="bold">R</text>
  
  <polygon points="225,200 215,190 235,190" fill="cyan" stroke="black" stroke-width="2"/>
  <text x="225" y="205" font-family="Arial" font-size="14" font-weight="bold">R</text>
  
  <polygon points="275,200 265,190 285,190" fill="cyan" stroke="black" stroke-width="2"/>
  <text x="275" y="205" font-family="Arial" font-size="14" font-weight="bold">R</text>
  
  <polygon points="325,200 315,190 335,190" fill="cyan" stroke="black" stroke-width="2"/>
  <text x="325" y="205" font-family="Arial" font-size="14" font-weight="bold">R</text>
  
  <polygon points="375,200 365,190 385,190" fill="cyan" stroke="black" stroke-width="2"/>
  <text x="375" y="205" font-family="Arial" font-size="14" font-weight="bold">R</text>
  
  <!-- Connections -->
  <!-- Prior connections -->
  <line x1="100" y1="110" x2="100" y2="130" stroke="black" stroke-width="1.5"/>
  <line x1="150" y1="40" x2="150" y2="80" stroke="black" stroke-width="1.5"/>
  <line x1="250" y1="40" x2="250" y2="80" stroke="black" stroke-width="1.5"/>
  <line x1="350" y1="40" x2="350" y2="80" stroke="black" stroke-width="1.5"/>
  
  <!-- IMU connections -->
  <line x1="120" y1="150" x2="150" y2="150" stroke="black" stroke-width="1.5"/>
  <line x1="170" y1="150" x2="200" y2="150" stroke="black" stroke-width="1.5"/>
  <line x1="220" y1="150" x2="250" y2="150" stroke="black" stroke-width="1.5"/>
  <line x1="270" y1="150" x2="300" y2="150" stroke="black" stroke-width="1.5"/>
  <line x1="320" y1="150" x2="350" y2="150" stroke="black" stroke-width="1.5"/>
  <line x1="370" y1="150" x2="400" y2="150" stroke="black" stroke-width="1.5"/>
  <line x1="350" y1="110" x2="350" y2="150" stroke="black" stroke-width="1.5"/>
  
  <!-- Wheel odometry connections -->
  <line x1="120" y1="130" x2="150" y2="130" stroke="black" stroke-width="1.5"/>
  <line x1="170" y1="130" x2="200" y2="130" stroke="black" stroke-width="1.5"/>
  <line x1="220" y1="130" x2="250" y2="130" stroke="black" stroke-width="1.5"/>
  <line x1="270" y1="130" x2="300" y2="130" stroke="black" stroke-width="1.5"/>
  <line x1="320" y1="130" x2="350" y2="130" stroke="black" stroke-width="1.5"/>
  <line x1="370" y1="130" x2="400" y2="130" stroke="black" stroke-width="1.5"/>
  
  <!-- Reprojection connections -->
  <line x1="100" y1="170" x2="125" y2="190" stroke="black" stroke-width="1.5"/>
  <line x1="125" y1="190" x2="150" y2="250" stroke="black" stroke-width="1.5"/>
  <line x1="165" y1="95" x2="125" y2="190" stroke="black" stroke-width="1.5"/>
  <line x1="265" y1="95" x2="125" y2="190" stroke="black" stroke-width="1.5"/>
  
  <line x1="200" y1="170" x2="175" y2="190" stroke="black" stroke-width="1.5"/>
  <line x1="175" y1="190" x2="150" y2="250" stroke="black" stroke-width="1.5"/>
  <line x1="165" y1="95" x2="175" y2="190" stroke="black" stroke-width="1.5"/>
  <line x1="265" y1="95" x2="175" y2="190" stroke="black" stroke-width="1.5"/>
  
  <line x1="200" y1="170" x2="225" y2="190" stroke="black" stroke-width="1.5"/>
  <line x1="225" y1="190" x2="250" y2="250" stroke="black" stroke-width="1.5"/>
  <line x1="165" y1="95" x2="225" y2="190" stroke="black" stroke-width="1.5"/>
  <line x1="265" y1="95" x2="225" y2="190" stroke="black" stroke-width="1.5"/>
  
  <line x1="300" y1="170" x2="275" y2="190" stroke="black" stroke-width="1.5"/>
  <line x1="275" y1="190" x2="250" y2="250" stroke="black" stroke-width="1.5"/>
  <line x1="165" y1="95" x2="275" y2="190" stroke="black" stroke-width="1.5"/>
  <line x1="265" y1="95" x2="275" y2="190" stroke="black" stroke-width="1.5"/>
  
  <line x1="300" y1="170" x2="325" y2="190" stroke="black" stroke-width="1.5"/>
  <line x1="325" y1="190" x2="350" y2="250" stroke="black" stroke-width="1.5"/>
  <line x1="165" y1="95" x2="325" y2="190" stroke="black" stroke-width="1.5"/>
  <line x1="265" y1="95" x2="325" y2="190" stroke="black" stroke-width="1.5"/>
  
  <line x1="400" y1="170" x2="375" y2="190" stroke="black" stroke-width="1.5"/>
  <line x1="375" y1="190" x2="350" y2="250" stroke="black" stroke-width="1.5"/>
  <line x1="165" y1="95" x2="375" y2="190" stroke="black" stroke-width="1.5"/>
  <line x1="265" y1="95" x2="375" y2="190" stroke="black" stroke-width="1.5"/>
  
  <!-- Explanation -->
  <text x="50" y="300" font-family="Arial" font-size="14" font-weight="bold">Factor Graph Components:</text>
  
  <text x="50" y="325" font-family="Arial" font-size="14">
    • Variables (circles/rectangles): Parameters to be estimated
  </text>
  <text x="50" y="345" font-family="Arial" font-size="14">
    • Factors (triangles/squares): Constraints from measurements
  </text>
  <text x="50" y="365" font-family="Arial" font-size="14">
    • Edges: Connect factors to the variables they constrain
  </text>
  <text x="50" y="385" font-family="Arial" font-size="14">
    • Optimization: Find variable values that minimize the sum of factor errors
  </text>
  
  <!-- Legend -->
  <rect x="450" y="300" width="140" height="180" fill="white" stroke="black" stroke-width="1"/>
  <text x="470" y="320" font-family="Arial" font-size="14" font-weight="bold">Legend</text>
  
  <circle cx="470" cy="340" r="10" fill="#bbf" stroke="black" stroke-width="1"/>
  <text x="485" y="345" font-family="Arial" font-size="12">Vehicle Poses</text>
  
  <circle cx="470" cy="365" r="10" fill="#fbb" stroke="black" stroke-width="1"/>
  <text x="485" y="370" font-family="Arial" font-size="12">Landmarks</text>
  
  <rect x="460" y="380" width="20" height="20" fill="#fbf" stroke="black" stroke-width="1"/>
  <text x="485" y="395" font-family="Arial" font-size="12">Parameters</text>
  
  <polygon points="470,420 460,410 480,410" fill="#bfb" stroke="black" stroke-width="1"/>
  <text x="485" y="420" font-family="Arial" font-size="12">Prior Factors</text>
  
  <rect x="460" y="430" width="20" height="20" fill="orange" stroke="black" stroke-width="1"/>
  <text x="485" y="445" font-family="Arial" font-size="12">IMU Factors</text>
  
  <rect x="460" y="455" width="20" height="20" fill="yellow" stroke="black" stroke-width="1"/>
  <text x="485" y="470" font-family="Arial" font-size="12">Wheel Factors</text>
  
  <polygon points="470,490 460,480 480,480" fill="cyan" stroke="black" stroke-width="1"/>
  <text x="485" y="490" font-family="Arial" font-size="12">Reprojection</text>
</svg>
